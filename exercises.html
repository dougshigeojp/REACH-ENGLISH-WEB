<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REACH English | Exercises</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Shared Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Exercise Specific Styles (Internal for now, move to CSS later if preferred) -->
    <style>
        /* Exercise Header Overrides */
        #ex-header {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 1000;
        }
        .ex-meta { font-family: 'Montserrat', sans-serif; font-weight: 700; color: var(--primary-blue); font-size: 0.9rem; }
        .timer-badge { background: #333; color: #fff; padding: 5px 15px; border-radius: 20px; font-weight: bold; font-family: monospace; }
        
        /* Sidebar Checkmarks */
        .nav-step-item.completed::after {
            content: '‚úì'; color: var(--success-green); margin-left: 10px; font-weight: 900;
        }

        /* Result Page */
        #result-page { display: none; text-align: center; padding: 40px; }
        .stat-box { display: inline-block; margin: 15px; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .stat-num { font-size: 2.5rem; font-weight: 900; color: var(--primary-blue); }
    </style>
</head>
<body class="exercise-mode">

    <!-- HEADER -->
    <header id="ex-header">
        <div style="display:flex; align-items:center; gap:15px;">
             <!-- Menu Toggle -->
            <button id="menu-toggle" aria-label="Toggle Menu" style="position:relative; top:0; left:0; margin:0;">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </button>
            <div class="ex-meta">
                EXERCISES ‚Ä¢ <span id="ex-grade">GRADE</span> ‚Ä¢ <span id="ex-bimester">BIMESTER</span> ‚Ä¢ <span id="ex-chapter">CHAPTER</span>
            </div>
        </div>
        <div class="timer-badge" id="global-timer">00:00</div>
    </header>

    <!-- RETRACTABLE MENU -->
<div id="menu-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;"></div>

<nav id="slide-menu">
    <!-- Close Button -->
    <button id="menu-close-btn" style="position:absolute; top:15px; right:15px; background:none; border:none; font-size:2rem; color:var(--primary-blue); cursor:pointer;">&times;</button>

    <!-- Home Link Fixed -->
    <a href="exercises.html?id=ex-home" class="home-link">üè† EXIT EXERCISES</a>

    <!-- Inside the nav id="slide-menu" in exercises.html -->
<div class="menu-header">
    <div class="menu-logo"><span class="orange-text">REACH</span>Practice</div>
    <div id="menu-grade-label">GRADE LEVEL</div> <!-- Keep this -->
    <div style="font-size:0.8rem; color:#666; margin-top:5px;">
        <span id="ex-bimester"></span> ‚Ä¢ <span id="ex-chapter"></span> <!-- Add these IDs -->
    </div>
</div>
    <ul id="nav-list">
        <!-- Items injected by JS -->
    </ul>
</nav>

    <!-- MAIN CONTENT -->
    <main id="main-container">
        <div id="lesson-content">
            <div class="loader">Loading Random Exercise Set...</div>
        </div>
    </main>

    <!-- NAVIGATION UI (Bottom Right) -->
    <div id="ui-cluster">
        <div class="nav-buttons">
            <button id="prev-btn" class="nav-arrow" disabled>‚Üê</button>
            <button id="next-btn" class="nav-arrow">‚Üí</button>
        </div>
    </div>

    <!-- AUDIO ENGINE -->
    <audio id="global-audio-player"></audio>

    <!-- SCRIPTS -->
    <script src="engine-exercises.js"></script>

    <!-- DATA LOADER -->
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const lessonId = urlParams.get('id');

        if (!lessonId) {
            // If no ID, we should redirect to a selection home or show error
            // For now, we show a basic error
            document.getElementById('lesson-content').innerHTML = `
                <div style="text-align:center; padding:50px;">
                    <h2>No Exercise ID Found</h2>
                    <p>Please select an exercise list from the dashboard.</p>
                </div>`;
        } else {
            const dataScript = document.createElement('script');
            dataScript.src = `data/exercises/${lessonId}.js`;
            dataScript.onload = () => console.log("Exercise Data Loaded");
            document.body.appendChild(dataScript);
        }
    </script>
</body>
</html>